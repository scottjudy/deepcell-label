<!-- START infopane.html -->
<ul class="collapsible z-depth-0 infopane">
  <li>
    <div class="collapsible-header grey lighten-3">
      <i class="material-icons">help_outline</i>
      Instructions (Click to expand/collapse)
    </div>
    <div class="collapsible-body">
      <p dir="ltr">
        Caliban is a tool designed for the correction of biological image annotations.
        Annotations can be corrected with whole-label modifications or pixel-level editing.
        Caliban displays images as well as useful information about the images to guide corrections.
      </p>

      <p dir="ltr">
        The right pane of Caliban displays an image of cells.
        By default, this shows the cell segmentation masks for that image, but can be toggled to display the raw image.
        Each cell value is displayed with a different color.
        In pixel-editing mode, the raw image is overlaid with its annotations.
      </p>

      <p dir="ltr">
        The left pane of Caliban displays information.
        The frame number you are viewing will always be displayed in the top left corner.
        When you mouse over a cell in the right pane, information about that cell will be displayed in the bottom left corner.
        Cell selections and confirmations will also be displayed in the bottom left corner.
      </p>

      <h4>The Keyboard Tools</h4>

      <h5><em>Universal</em></h5>

      <p><strong>Mouse</strong> over a cell mask to see cell label and lineage information.</p>

      <p><strong>Spacebar + click and drag</strong> to pan across the viewed image.</p>

      <p><strong>Scroll Wheel</strong> | In raw image or edit mode, scroll up/down to change the contrast of the image. Hold down the shift key while scrolling to change the brightness. (These values can be reset by pressing 0.)&nbsp;</p>

      <p><strong>Alt+Scroll Wheel</strong> or <strong>-</strong> and <strong>=</strong> | Zoom in and out on the image.</p>

      <p><strong>0 (zero)</strong> | Reset the brightness and contrast settings, if viewing the raw image or in pixel-editing mode.&nbsp;</p>

      <p><strong>z</strong> | Switch between annotations and raw images; use this to check if your masks and labels match up to the actual cell image.</p>

      <p><strong>e</strong> | Toggle between whole-label and pixel-editing modes. Note: this will not toggle between modes if anything is selected.</p>

      <p><strong>esc</strong> | Cancel operation; do this if you click on a cell(s) and want to undo your click.</p>

      <p><em>To navigate through frames:</em></p>

      <p><strong>a</strong> or <strong>left arrow key</strong> | Go back to previous frame</p>

      <p><strong>d</strong> or <strong>right arrow key</strong> | Go forward to next frame</p>

      <h5><em>Whole-label mode (default)</em></h5>

      <p><strong>space</strong> to confirm actions; this will apply some actions (create, replace, swap) to all frames.</p>

      <p><strong>s</strong> to confirm the single-frame versions of create, replace, or swap.</p>

      <p><strong>Click</strong> on a cell mask to select it.</p>

      <p><strong>h</strong> | Highlight mode; if used, this will highlight the cells that are selected with a red mask.</p>

      <p><strong>p</strong> | Predict relationships (npz files only); if used, this will reassign labels across frames. Does not detect cell divisions in timelapse movies.</p>

      <p><em>Single-Click Edit Operations:</em></p>

      <p><strong>alt+click</strong> | <em><u>flood label</u></em>: hold down the alt key while clicking on a cell. This will flood the label you clicked on with a new label. This can be used to relabel a cell that has a duplicate label elsewhere in the same frame.&nbsp;</p>

      <p><strong>shift+click</strong> | <em><u>trim pixels</u></em>: hold down the shift key while clicking on a cell. This will trim away stray pixels from the part of the label you clicked on. This can be used to quickly clean up a cell annotation if there are disconnected pixels with that label that should not exist.&nbsp;</p>

      <p><strong>c</strong> | <em><u>create</u></em>: click on one cell mask (cell C). Hit “c” to create a new cell track starting from that frame.&nbsp;</p>

      <p dir="ltr"><strong>x</strong> | <em><u>delete</u></em>: click on one cell mask (cell A). Hit "x" to delete the mask. This is useful when you have a couple pixels in a frame that represent a cell, but you want to remove that label.</p>

      <p dir="ltr"><em>Two-Click Edit Operations:</em></p>

      <p><strong>r</strong> | <em><u>replace</u></em>: click on one cell mask (cell A) then another (cell B). Hit “r” to replace all instances of cell B with cell A.</p>

      <p><strong>p</strong> | <em><u>parent</u></em> (tracked files only): click on one cell mask (cell D) then another (cell E). Hit “p” to assign cell D as the parent of cell E. Cell D will now include cell E in its list of daughter cells, and cell E will list cell D as its parent.</p>

      <p dir="ltr"><strong>s&nbsp;</strong>| <em><u>swap</u></em>: click on one cell mask (cell F) then another (cell G). Hit “s” to swap the cell values (does not swap parent/daughter information). This affects all frames of the movie.</p>

      <p dir="ltr"><strong>w</strong> | <em><u>watershed</u></em>: this function is to separate one cell mask (cell H) into two (cell H and cell I). Click on one pixel in a cell mask (cell H), then another pixel in the same cell mask. These points should correspond to the centers of the cells you are trying to separate. You can select these positions while you are looking at the raw channel. The first click should be on the cell that you want to remain cell H.</p>

      <p dir="ltr">Caliban currently doesn’t support an option to reverse an operation, so if a watershed operation produces a bad split, you may need to correct it in pixel-editing mode.&nbsp;</p>

      <h5><em>Pixel-editing mode</em></h5>

      <p><em>Viewing:</em></p>

      <p><strong>Scroll Wheel</strong> | Adjust contrast of raw image. Hold down the shift key to change the brightness. (These values can be reset by pressing 0.)</p>

      <p><strong>h</strong> | Highlight mode; if used, pixels that match the current value of the brush will be displayed in red. (If using conversion brush, the label being overwritten does not change color, only the label that will replace it.)</p>

      <p><strong>Click</strong> or <strong>click and drag</strong> to use the brush. Brush will draw the value that it is set to and will not overwrite other labels.</p>

      <p><strong>x</strong> | Toggle eraser mode on or off. Eraser will only erase labels that the brush is set to.</p>

      <p><em>To change the size of the brush:</em></p>

      <p><strong>down arrow key</strong> | Decrease the brush size</p>

      <p><strong>up arrow key</strong> | Increase the brush size</p>

      <p><em>To change the value of the brush:</em></p>

      <p><strong>[</strong> | Decrease the value of the brush</p>

      <p><strong>]</strong> | Increase the value of the brush</p>

      <p><strong>n</strong> | Set brush to an unused value</p>

      <p><strong>p</strong> | Turn on color picker (click on a label to set brush to that value)</p>

      <p><strong>r</strong> | Turn on conversion brush (allows you to replace one label with another without affecting background, follow prompts)</p>

      <p><em>Misc:</em></p>

      <p><strong>t</strong> | Use thresholding tool (click and drag a bounding box around area to threshold)</p>

    </div>
  </li>
</ul>
<!-- END infopane.html -->
